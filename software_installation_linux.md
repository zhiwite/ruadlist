# Установка, настройка и использование среды разработки в ОС Linux #

## Список необходимого ПО ##
  * [apt://subversion Subversion]
  * gEdit, Kate или другой нормальный текстовый редактор с сортировкой хоть через расширение.
> > _gEdit входит в стандартную поставку среды Gnome, а Kate - часть среды KDE_
  * Perl - обычно входит в стандартную поставку в популярных дистрибутивах.
При желании для редактирования можно использовать Notepad++ через WINE, но это не очень-то удобно, да и не практично - большая часть его возможностей всё-равно в нашем случае не нужна. В крайнем случае можно найти и поставить UltraEdit for Linux, но он платный. Использование vi/vim не возброняется при условии, если они ни чего не испортят. :)

## Установка и настройка Subversion ##
  1. Устанавливаем из репозитория пакет subversion. В дистрибутивах основанных на Debian и Ubuntu это можно сделать командой sudo apt-get install subversion в консоли.
  1. В том-же gnome-terminal выполняем следующие команды:
```
    cd ~
    svn checkout https://ruadlist.googlecode.com/svn/trunk/ ruadlist --username имя_пользователя_googlecode --password пароль_на_googlecode
```
> > Точную команду svn checkout см. [тут](http://code.google.com/p/ruadlist/source/checkout). --password пароль можно не указывать сейчас, но всё равно придётся потом, чтобы внести изменения в подписку.
  1. Теперь последний штрих - делаем скрипты для упрощения обновления и коммита, лежащие в новой папке, исполнимыми. Для этого выполняем следующий набор команд:
```
    cd ruadlist
    chmod +x ./commit
    chmod +x ./hash.pl
    chmod +x ./update 
```
или ставим соответствующие галочки в свойствах этих файлов. После этих действий мы получим папку, в которой будут содержаться все файлы проекта. В дальнейшем именно их и требуется редактировать.

## Использование Subversion ##

Всю информацию о ключах утилиты svn можно прочитать выполнив команду man svn в консоли. Здесь же рассмотрим несколько основных операций.

### Получение новых версий файлов из репозитория ###


> svn up

> Да, вот так просто. Просто заходим в консоли в папку ruadlist и выполняем эту команду.
> Если есть желание почитать список изменений, то вместо svn up выполняет файл `./update`.

### Редактирование файлов ###
  1. Перед редактированием файлов желательно обновить репозиторий командой `svn up` или `./update`.
  1. Далее редактируем файлы любым текстовым редактором (например, gedit) и сохраняем.
> > Для этого в консоли пишем имя-редактора имя-файла.
> > Например, пишем gedit advblock.txt.
> > Для ускорения набора можно и нужно пользоваться автодополнением по кнопке Tab.
> > Не забываем, что кодировка должны быть UTF-8, иначе в AdBlock`е русские символы отображаться не будут (gedit и kate кодировку успешно определяют сами).
  1. После завершения редактирования выполняем в консоли команду ./commit, которая вызовет небольшой скрипт, предназначенный для автоматизации процесса добавления новой версии файлов в репозиторий.
> > Автоматически в отдельном окне xterm откроется редактор nano, в котором нужно ввести причину внесённых изменений, сохранить файл (Ctrl+o, enter) и закрыть (Ctrl+x). Прямо перед открытием nano произойдёт ре-синхронизация с основным репозиторием, пересчёт контрольных сумм и будет выведен список изменений с прошлой версии.

При первой фиксации ревизии потребуется ввести пароль. Для этого надо прервать выполнение commit после обновления контрольных сумм и выполнить команду: svn commit --username логин@gmail.com --password пароль-на-googlecode. Получаем пароль вот по [этой ссылке](http://code.google.com/hosting/settings) (Your googlecode.com password: _пароль_).

### Решение проблемы пересекающихся ревизий ###

Если за время написания комментария к добавляемой в репозиторий ревизии успели произойти какие-либо изменения на сервере, то произойдёт конфликт ревизий, который можно сразу на месте и решить из консоли. Проблема в том, что при каждом коммите меняется контрольная сумма файла и любой запоздалый коммит гарантированно будет иметь проблему как минимум в этом месте.

Соглашаемся редактировать файл, удаляем любой из двух блоков с контрольной суммой и строки ограничивающие проблемный блок. После этого ищем в документе такие-же блоки и если находим, то решаем проблему на месте - обычно этого не происходит, но если исправить пересекающиеся наборы фильтров, то вполне может произойти. Сохраняем получившийся файл и прерываем коммит командой Ctrl+C.

Теперь снова выполняем команду ./commit. Описание можно открыть из ранее открытого файла с именем анологичным текущему имени файла. После завершения коммита имеет смысл удалить боле не нужный временный файл командой rm или из файлового менеджера.

## Настройка gEdit ##

В настройках на закладке плагинов включите плагин Sort. Теперь в меню правки будет доступна команда сортировки выделенного текста. Следует учитывать, что в линукс строки обычно сортируются без учёта символов и потому правила вроде adv /adv и -adv окажутся рядом.